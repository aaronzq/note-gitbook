---
description: concepts introduction using c++ and some library installation blogs
---

# Compile, Link

## What does the compiler do when building the c++ program?

{% embed url="https://www.learncpp.com/cpp-tutorial/introduction-to-the-compiler-linker-and-libraries/" %}

Usually in IDE, it's one single step to compile the code and generate an executable to run. But it actually contains 2 steps: 

1. Compile Use a C++ **compiler** to go through each of your source code \(.cpp\) file, check compilation error, and translate that into machine language called an object file. \(.o  / .obj\).  
2. Link Use a **linker** to take all the object files generated by the compiler and combine them into a single executable program, also to link it to _library files_. 

In order to direct the compiler and linker to correct necessary files, we will need to pay attention to 2 categories:

1. Include path: we should specify where to look for our header files \(`#include <eigen3/Eigen/Eigen>`\)
2. Library path: specify the corresponding library files \(.lib .dll for windows, .so .o .a for linux\)

## What is library and how to use them?

Introduction to **library** can be found in the [link. ](https://www.learncpp.com/cpp-tutorial/a1-static-and-dynamic-libraries/)

We don't need to care about standard library as the compiler and linker automatically connect to them. For external libraries like OpenCV, by following their installation instruction, we will eventually have a locally built or pre-built library files. 

On Windows, we usually should first direct the linker to the .lib files and then copy the .dll files to locations where the linker can search for, like /System, /System32 and directories in the PATH environment variable. Or simply, copy the .dll files to your source files folder to package with them together.  [https://www.learncpp.com/cpp-tutorial/a2-using-libraries-with-visual-studio-2005-express/](https://www.learncpp.com/cpp-tutorial/a2-using-libraries-with-visual-studio-2005-express/)

[https://blog.csdn.net/yefcion/article/details/80632301](https://blog.csdn.net/yefcion/article/details/80632301) \(This one goes through how to install opencv for visual studio 2017. Note that by adding \build\bin to the PATH environment variable it enables the linker to find the .dll files. And in my practice, it also works if I bypass the environment variable editing and directly move the needed .dll to /system folder. Also pay attention to the difference between `opencv_worldxxxd.lib` and `opencv_worldxxx.lib` . Use the right one based on your build mode: debug or release \)

On Linux, things are easier. Usually there's a `make install` at the end of your package installation. This will simply copy the library files to default folder in the system the compiler and linker knows. With the help from some package configuration software \([pkg-config](https://stackoverflow.com/questions/20416956/what-is-the-significance-of-pkg-config-in-gcc)\) to help locate the libraries.   
  
[https://docs.opencv.org/trunk/d7/d9f/tutorial\_linux\_install.html](https://docs.opencv.org/trunk/d7/d9f/tutorial_linux_install.html)\(This one goes through how to install opencv in linux and note that if we want to use pkg-config we need to specify it when cmake. e.g. -DOPENCV\_GENERATE\_PKGCONFIG=ON \)  
  
[https://gist.github.com/AmitThakur/8382707](https://gist.github.com/AmitThakur/8382707) \(This one uses pkg-config to locate the libraries as well as include path, it helps a lot when configuring tools like **cmake**\).

## Misc

**Files formats in Windows and Linux** [**https://askubuntu.com/a/174356**](https://askubuntu.com/a/174356)\*\*\*\*

**Configuring vscode** [**https://code.visualstudio.com/docs/cpp/config-msvc**](https://code.visualstudio.com/docs/cpp/config-msvc)  
****Personally I think it's enough to configure only the [c\_cpp\_properties.json](https://code.visualstudio.com/docs/cpp/config-msvc#_cc-configurations) to enable IntelliSense. If we want to compile and run, we could simply use **cmake** \(if it is a cmake project\) and/or **Developer Command Prompt for VS \(**cl.exe, link.exe, nmake.exe, msbuild.exe etc**\):**   
First cmake and then use nmake or msbuild to build: **Start at** [**Step 8**](https://www.learnopencv.com/install-opencv3-on-windows/)**, and build using tools in** [**windows**](https://docs.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=vs-2019)**.**   
Or first cmake and then use cmake to build: **Start at** [**Step 8**](https://www.learnopencv.com/install-opencv3-on-windows/)\*\*\*\*

```text
cmake .. -G "Visual Studio 15 2017 Win64"
msbuild BezierCurve.sln /p:Configuration=Release

or 

cmake .. -G "Visual Studio 15 2017 Win64"
cmake --build . --config Release

```

  
  
****If we insist on using vscode for building:   
configure the task.json: [include path problem in tasks.json](https://stackoverflow.com/questions/53973777/vscode-no-such-file-or-directory-when-running-c-code),  
maybe wanna use g++ [compile and link using g++](https://stackoverflow.com/questions/52910102/vscode-c-task-json-include-path-and-libraries),  
or use cl.exe and follow the same routine as g++ \(last link\): [step by step compile and link using cl.exe and link.exe](http://psy.swansea.ac.uk/staff/carter/Compiling/compilation_build.htm)

